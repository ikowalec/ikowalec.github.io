<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Search</title>
  
  <!-- Bootswatch (Flatly) theme for Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/flatly/bootstrap.min.css" rel="stylesheet">
  <!-- Optional: local overrides -->
  <link rel="stylesheet" href="/static/css/site.css">
</head>
<body>
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <a class="navbar-brand" href="/">Lab Site</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsMain" aria-controls="navbarsMain" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarsMain">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link" href="/publications/">Publications</a></li>
            <li class="nav-item"><a class="nav-link" href="/collaborations/">Collaborations</a></li>
            <li class="nav-item"><a class="nav-link" href="/training/">Training</a></li>
            <li class="nav-item"><a class="nav-link" href="/tags/">Tags</a></li>
            <li class="nav-item"><a class="nav-link" href="/about/">About</a></li>
          </ul>
          <div class="d-flex">
            <a class="btn btn-outline-light" href="/search/">Search</a>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <main class="container py-4">
    
<h1 class="mb-3">Search</h1>
<div class="mb-3">
  <input id="search" type="text" class="form-control form-control-lg" placeholder="Search...">
  <div class="form-text">Start typing to search across pages.</div>

</div>
<ul id="results" class="list-group"></ul>
<script src="/static/js/lunr.min.js"></script>
<script>
fetch('/search_index.json').then(r=>r.json()).then(data=>{
  var idx = lunr(function(){
    this.ref('id');
    this.field('title');
    this.field('text');
    data.forEach(doc=>this.add(doc), this);
    window.docs = data;
    window.idx = this;
  });
  document.getElementById('search').addEventListener('input', function(){
    var q = this.value;
    var list = document.getElementById('results');
    list.innerHTML = '';
    if(!q){return;}
    window.idx.search(q).forEach(function(r){
      var doc = window.docs.find(d=>d.id===r.ref);
      var li = document.createElement('li');
      li.className = 'list-group-item';
      var a = document.createElement('a');
      a.href = doc.id;
      a.textContent = doc.title;
      a.className = 'text-decoration-none';
      li.appendChild(a);
      list.appendChild(li);
    });
  });
});
</script>

  </main>

  <footer class="border-top py-4 mt-auto">
    <div class="container d-flex flex-column flex-md-row align-items-center justify-content-between">
      <div class="text-muted small">&copy; 2025 Lab Site</div>
      <div class="small">
        <a class="link-secondary me-3" href="/feed/publications.xml">Publications RSS</a>
        <a class="link-secondary" href="/feed/training.xml">Training RSS</a>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
